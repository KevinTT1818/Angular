<div class="home-container">
  @if (isLoading()) {
    <div class="loading-screen">
      <div class="spinner"></div>
      <p>加载中...</p>
    </div>
  } @else {
    <!-- Featured Article Hero Section -->
    @if (featuredBlog()) {
      <section class="featured-hero">
        <div class="featured-container">
          <div class="featured-sidebar">
            <h2 class="editor-selection-title">EDITOR'S SELECTION</h2>
            <div class="feature-articles">
              @for (blog of latestBlogs().slice(1, 4); track blog.id) {
                <div class="feature-article-item" [routerLink]="['/blog', blog.id]">
                  <span class="feature-category">{{ blog.category.name }}</span>
                  <h4>{{ blog.title }}</h4>
                </div>
              }
            </div>
          </div>

          <article class="featured-article" [routerLink]="['/blog', featuredBlog()!.id]">
            <div class="featured-image">
              <img
                [src]="featuredBlog()!.coverImage"
                [alt]="featuredBlog()!.title"
                (error)="onImageError($event)"
                loading="eager">
              <div class="featured-overlay"></div>
            </div>
            <div class="featured-content">
              <span class="featured-category">{{ featuredBlog()!.category.name }}</span>
              <span class="featured-tag"># {{ featuredBlog()!.category.name }}</span>
              <h1 class="featured-title">{{ featuredBlog()!.title }}</h1>
              <p class="featured-excerpt">{{ featuredBlog()!.excerpt }}</p>
              <div class="featured-meta">
                <div class="author-info">
                  @if (featuredBlog()!.authorAvatar) {
                    <img [src]="featuredBlog()!.authorAvatar" [alt]="featuredBlog()!.author" class="author-avatar">
                  }
                  <span class="author-name">{{ featuredBlog()!.author }}</span>
                </div>
                <span class="publish-date">shared on {{ featuredBlog()!.publishedAt | date:'MMM dd, yyyy' }}</span>
              </div>
            </div>
          </article>
        </div>
      </section>
    }

    <!-- Article Cards Grid -->
    <section class="articles-section">
      <div class="articles-container">
        <div class="articles-grid">
          @for (blog of latestBlogs().slice(4); track blog.id) {
            <article class="article-card" [routerLink]="['/blog', blog.id]">
              <div class="card-image">
                <img
                  [src]="blog.coverImage"
                  [alt]="blog.title"
                  (error)="onImageError($event)"
                  loading="lazy">
                <div class="card-overlay"></div>
              </div>
              <div class="card-body">
                <div class="card-header">
                  <span class="card-category">{{ blog.category.name }}</span>
                  <span class="card-tag"># {{ blog.category.name }}</span>
                </div>
                <h3 class="card-title">{{ blog.title }}</h3>
                <p class="card-description">{{ blog.excerpt }}</p>
                <div class="card-footer">
                  <div class="card-author">
                    @if (blog.authorAvatar) {
                      <img [src]="blog.authorAvatar" [alt]="blog.author">
                    }
                    <span>{{ blog.author }}</span>
                  </div>
                  <span class="card-date">shared on {{ blog.publishedAt | date:'MMM dd, yyyy' }}</span>
                </div>
              </div>
            </article>
          }
        </div>

        <div class="view-more-section">
          <button class="view-more-btn" routerLink="/blogs">查看更多文章</button>
        </div>
      </div>
    </section>
  }
</div>
